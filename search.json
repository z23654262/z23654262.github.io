[{"title":"Stellar主题切换深色/浅色模式","path":"/2023/10/09/blog-darkmode/","content":"资源文件CSStale/source/customize/css/ZYDark.css123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154#ZYDark:root &#123; --site-bg: #1c1e21; --card: #373d43; --block: #26292c; --block-border: #383d42; --block-hover: #2f3337; --text-p0: #fff; --text-p1: #ccc; --text-p2: #b3b3b3; --text-p3: #858585; --text-p4: #707070; --text-meta: #4d4d4d; --text-code: #ff6333;&#125;@media screen and (max-width: 667px) &#123; #ZYDark:root &#123; --site-bg: #000; &#125;&#125;#ZYDark:root &#123; --blur-bg: rgba(0,0,0,0.5);&#125;#ZYDark .float-panel &#123; --blur-bg: rgba(0,0,0,0.4);&#125;#ZYDark .tag-plugin.tag &#123; --theme: #ff6333; --theme-bg1: #3d1e14; --theme-bg2: #2f2522; --theme-border: #5c2d1f; --text-p0: #ffc4b3; --text-p1: #dfae9f; --text-p2: #f1997e;&#125;#ZYDark .tag-plugin[color=&#x27;red&#x27;] &#123; --theme: #f44336; --theme-bg1: #3d1714; --theme-bg2: #2f2322; --theme-border: #5c231f; --text-p0: #ffb8b3; --text-p1: #dfa49f; --text-p2: #f1867e;&#125;#ZYDark .tag-plugin[color=&#x27;orange&#x27;] &#123; --theme: #fa6400; --theme-bg1: #3d2514; --theme-bg2: #2f2722; --theme-border: #5c371f; --text-p0: #ffd1b3; --text-p1: #dfb99f; --text-p2: #f1ac7e;&#125;#ZYDark .tag-plugin[color=&#x27;yellow&#x27;] &#123; --theme: #ffbd2b; --theme-bg1: #3d3014; --theme-bg2: #2f2b22; --theme-border: #5c491f; --text-p0: #ffe7b3; --text-p1: #dfcb9f; --text-p2: #f1cd7e;&#125;#ZYDark .tag-plugin[color=&#x27;green&#x27;] &#123; --theme: #3dc550; --theme-bg1: #143d1a; --theme-bg2: #222f24; --theme-border: #1f5c27; --text-p0: #b3ffbd; --text-p1: #9fdfa8; --text-p2: #7ef18e;&#125;#ZYDark .tag-plugin[color=&#x27;cyan&#x27;] &#123; --theme: #1bcdfc; --theme-bg1: #14353d; --theme-bg2: #222d2f; --theme-border: #1f4f5c; --text-p0: #b3efff; --text-p1: #9fd2df; --text-p2: #7ed9f1;&#125;#ZYDark .tag-plugin[color=&#x27;blue&#x27;] &#123; --theme: #2196f3; --theme-bg1: #142b3d; --theme-bg2: #222a2f; --theme-border: #1f415c; --text-p0: #b3ddff; --text-p1: #9fc3df; --text-p2: #7ebef1;&#125;#ZYDark .tag-plugin[color=&#x27;purple&#x27;] &#123; --theme: #9c27b0; --theme-bg1: #37143d; --theme-bg2: #2d222f; --theme-border: #531f5c; --text-p0: #f4b3ff; --text-p1: #d69fdf; --text-p2: #e07ef1;&#125;#ZYDark .tag-plugin[color=&#x27;light&#x27;] &#123; --theme-border: #fff; --theme-bg1: #e0e0e0; --theme-bg2: #fff; --text-p0: #000; --text-p1: #111; --text-p2: #1f1f1f; --text-p3: #555; --text-code: #fff;&#125;#ZYDark .tag-plugin[color=&#x27;dark&#x27;] &#123; --theme-border: #000; --theme-bg1: #1f1f1f; --theme-bg2: #111; --text-p0: #fff; --text-p1: #fff; --text-p2: #e0e0e0; --text-p3: #ddd; --text-code: #fff;&#125;#ZYDark .tag-plugin[color=&#x27;warning&#x27;],#ZYDark .tag-plugin[color=&#x27;light&#x27;] &#123; --text-p0: #000; --text-p1: #111; --text-p2: #1f1f1f; --text-p3: #555; --text-code: #fff;&#125;#ZYDark .social-wrap a.social:hover &#123; box-shadow: none;&#125;/* waline评论样式 */#ZYDark .wl-count&#123; padding: .375em; font-weight: bold; font-size: 1.25em; color: #fff;&#125;#ZYDark .cmt-body.waline&#123; --waline-white: #000; --waline-light-grey: #666; --waline-dark-grey: #999; /* 布局颜色 */ --waline-color: #fff; --waline-bgcolor: var(--block); --waline-bgcolor-light: #272727; --waline-border-color: #333; --waline-disable-bgcolor: #444; --waline-disable-color: #272727; /* 特殊颜色 */ --waline-bq-color: #272727; /* 其他颜色 */ --waline-info-bgcolor: #272727; --waline-info-color: #666;&#125; JSjs代码中的5、6、7对应侧边栏底部按钮的顺序，依次为黑夜、白天、自动（隐藏） 如果评论系统未使用giscus则把涉及评论的代码删除 tale/source/customize/js/ZYDark.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125# Hexo Configuration## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: SFZhang #网站名称avatar: /customize/images/tomcat.png #博客头像favicon: /customize/images/tomcat.png #网站图标subtitle: &quot;热爱可抵岁月漫长 | 温柔可挡艰难时光&quot; #鼠标移入翻转效果description: &#x27;一个积极生活的人&#x27;keywords:author: SFZhang #博客作者language: zh-CN #博客语言：en、zh-CNtimezone: &#x27;&#x27;# URL## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: http://example.compermalink: :year/:month/:day/:title/permalink_defaults:pretty_urls: trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks# Directorysource_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: enable: true # Open external links in new tab field: site # Apply to the whole site exclude: &#x27;&#x27;filename_case: 0render_drafts: falsepost_asset_folder: truerelative_link: falsefuture: truehighlight: enable: true line_number: true auto_detect: false tab_replace: &#x27;&#x27; wrap: true hljs: falseprismjs: enable: false preprocess: true line_number: true tab_replace: &#x27;&#x27;# Home page setting# path: Root path for your blogs index page. (default = &#x27;&#x27;)# per_page: Posts displayed per page. (0 = disable pagination)# order_by: Posts order. (Order by date descending by default)index_generator: path: &#x27;&#x27; per_page: 10 order_by: -date# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Metadata elements## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/metameta_generator: true# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;updated_option: &#x27;mtime&#x27;# Pagination## Set per_page to 0 to disable paginationper_page: 10pagination_dir: page# Include / Exclude file(s)## include:/exclude: options only apply to the &#x27;source/&#x27; folderinclude:exclude:ignore:# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: stellar# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy: - type: git repo: https://github.com/z23654262/z23654262.github.io.git branch: gh-pages message: &quot;Build at &#123;&#123; now(&#x27;yyyy-MM-dd HH:mm:ss&#x27;) &#125;&#125;&quot;# CSS、JSinject: head: - | #黑夜样式提前量 &lt;script&gt; if (window.localStorage.getItem(&#x27;ZYI_Theme_Mode&#x27;)===&#x27;dark&#x27; || (window.localStorage.getItem(&#x27;ZYI_Theme_Mode&#x27;)===&#x27;Moss&#x27; &amp;&amp; window.matchMedia(&#x27;(prefers-color-scheme: dark)&#x27;).matches))&#123; document.querySelector(&quot;html&quot;).id = &quot;ZYDark&quot;; &#125; &lt;/script&gt; - &lt;link rel=&quot;stylesheet&quot; href=&quot;/customize/css/ZYDark.css&quot;&gt; # 黑夜样式 - &lt;link rel=&quot;stylesheet&quot; href=&quot;https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css&quot; media=&quot;print&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;&gt; #字体 script: - &lt;script type=&quot;text/javascript&quot; src=&quot;/customize/js/ZYUtil.js&quot;&gt;&lt;/script&gt; # 工具类必须在ZYDark.js之前引入 - &lt;script type=&quot;text/javascript&quot; src=&quot;/customize/js/ZYDark.js&quot;&gt;&lt;/script&gt; # 黑夜控制 提前量tale/_config.xml123456789# 自定义引入css,jsinject: head: - | &lt;script&gt; if (window.localStorage.getItem(&#x27;ZYI_Theme_Mode&#x27;)===&#x27;dark&#x27; || (window.localStorage.getItem(&#x27;ZYI_Theme_Mode&#x27;)===&#x27;Moss&#x27; &amp;&amp; window.matchMedia(&#x27;(prefers-color-scheme: dark)&#x27;).matches))&#123; document.querySelector(&quot;html&quot;).id = &quot;ZYDark&quot;; &#125; &lt;/script&gt; #黑夜样式提前量 引入资源文件tale/_config.xml123456# 自定义引入css,jsinject: head: - &lt;link rel=&quot;stylesheet&quot; href=&quot;/customize/css/ZYDark.css&quot;&gt; # 黑夜样式 script: - &lt;script type=&quot;text/javascript&quot; src=&quot;/customize/js/ZYDark.js&quot;&gt;&lt;/script&gt; # 黑夜控制 默认黑夜模式关闭tale/_config.xml12style: darkmode: false # auto / always / false 添加侧边栏底部按钮tale/_config.xml123456789101112footer: social: ... Moon: icon: &#x27;&lt;img id=&quot;ThemeM&quot; src=&quot;/customize/svg/moon.svg&quot;/&gt;&#x27; url: javaScript:void(&#x27;永夜&#x27;); Sun: icon: &#x27;&lt;img id=&quot;ThemeL&quot; src=&quot;/customize/svg/sun.svg&quot;/&gt;&#x27; url: javaScript:void(&#x27;永昼&#x27;); #AI: # icon: &#x27;&lt;img id=&quot;ThemeAI&quot; src=&quot;/customize/svg/auto.svg&quot;/&gt;&#x27; # url: javaScript:void(&#x27;跟随系统&#x27;); SVG文件获取阿里巴巴矢量图标库（iconfont）里面有很多设计精美的图标可以直接生成svg图标下载到本地","tags":["Stellar"],"categories":["博客搭建"]},{"title":"Stellar主题设置（持续更新。。。）","path":"/2023/10/09/blog-complete-stellar/","content":"资源文件夹将头像、图标、css、js等文件放在source下 image-20231008153452595 基本信息tale/_config.yml12345678910# Sitetitle: SFZhang #网站名称avatar: /customize/images/sfzhang.jpg #博客头像favicon: /customize/images/sfzhang.jpg #网站图标subtitle: &quot;SFZhang&#x27;s blog | blog.sfzhang.cn&quot; #鼠标移入翻转效果description: &#x27;一个积极生活的人&#x27;keywords:author: SFZhang #博客作者language: zh-CN #博客语言：en、zh-CNtimezone: &#x27;&#x27; 侧边栏底部按钮tale/_config.stellar.yml1234567891011121314151617181920212223242526footer: social: QQ: icon: &#x27;&lt;img src=&quot;/customize/svg/contact.svg&quot;/&gt;&#x27; url: https://wpa.qq.com/msgrd?v=3&amp;uin=1119716380&amp;site=qq&amp;menu=yes&amp;jumpflag=1 github: icon: &#x27;&lt;img src=&quot;/customize/svg/github.svg&quot;/&gt;&#x27; url: https://github.com/z23654262 #iconfont: # icon: &#x27;&lt;img src=&quot;/customize/svg/iconfont.svg&quot;/&gt;&#x27; # url: https://www.iconfont.cn/ unsplash: icon: &#x27;&lt;img src=&quot;/customize/svg/unsplash.svg&quot;/&gt;&#x27; url: https://unsplash.com/@z23654262 train: icon: &#x27;&lt;img src=&quot;/customize/svg/train.svg&quot;/&gt;&#x27; url: https://unsplash.com/@z23654262 Moon: icon: &#x27;&lt;img id=&quot;ThemeM&quot; src=&quot;/customize/svg/moon.svg&quot;/&gt;&#x27; url: javaScript:void(&#x27;永夜&#x27;); Sun: icon: &#x27;&lt;img id=&quot;ThemeL&quot; src=&quot;/customize/svg/sun.svg&quot;/&gt;&#x27; url: javaScript:void(&#x27;永昼&#x27;); #AI: # icon: &#x27;&lt;img id=&quot;ThemeAI&quot; src=&quot;/customize/svg/auto.svg&quot;/&gt;&#x27; # url: javaScript:void(&#x27;跟随系统&#x27;); 首页显示导航tale/_config.stellar.yml123456sidebar: menu: post: &#x27;[btn.blog](/)&#x27; wiki: &#x27;[btn.wiki](/)&#x27; friends: &#x27;[友链](/)&#x27; about: &#x27;[关于](/)&#x27; 首页添加生活碎片添加页面1hexo new page life 添加首页按钮tale/_config.stellar.yml12post-index: # 近期发布 分类 标签 归档 and ... &#x27;生活碎片&#x27;: /life 导航高亮问题tale/node_modules/hexo-theme-stellar/layout/_partial/main/navbar/list_post.ejs1if (full_url_for(page.path) == full_url_for(obj[key])) 修改为 tale/node_modules/hexo-theme-stellar/layout/_partial/main/navbar/list_post.ejs1if (full_url_for(page.path) == full_url_for(obj[key]) + &#x27;/index.html&#x27;) 新建github仓库并添加一条issueimage-20231010160019820 编辑生活碎片页面tale/source/life/index.md1234567891011---title: menu_id: post #侧边栏首页高亮breadcrumb: false # 隐藏面包屑导航post_list: true # 显示首页导航date: 2023-10-10 10:34:34---&#123;% note color:orange 分享自己的生活碎片！ %&#125;&#123;% timeline api:https://api.github.com/repos/z23654262/blog-life/issues?direction=asc&amp;per_page=30 %&#125;&#123;% endtimeline %&#125; 预览生活碎片页面image-20231010160239480 添加评论系统giscus新增github仓库新增blog-comments仓库并开启Discussions功能 勾选blog-comments/Settings/Features/Discussions即可 修改配置tale/_config.stellar.yml123456789101112131415161718comments: service: giscus # giscus # https://giscus.app/zh-CN giscus: data-repo: xxx/xxx # [在此输入仓库] data-repo-id: # [在此输入仓库 ID] data-category: # [在此输入分类名] data-category-id: data-mapping: pathname data-strict: 0 data-reactions-enabled: 1 data-emit-metadata: 0 data-input-position: top # top, bottom data-theme: preferred_color_scheme data-lang: zh-CN data-loading: lazy crossorigin: anonymous 测试giscus评论系统博客内评论 image-20231010161000338 github仓库中Discussions image-20231010161132833 引用落霞孤鹜字体tale/_config.yml123inject: head: - &lt;link rel=&quot;stylesheet&quot; href=&quot;https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css&quot; media=&quot;print&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;&gt; #字体 tale/_config.stellar.yml123style: font-family: body: &#x27;&quot;LXGW WenKai Screen&quot;, sans-serif&#x27; 引用鸿蒙字体tale/_config.yml12345inject: head: - &lt;link rel=&quot;preconnect&quot; href=&quot;https://s1.hdslb.com/&quot; /&gt; - &lt;link rel=&quot;stylesheet&quot; href=&quot;//s1.hdslb.com/bfs/static/jinkela/long/font/regular.css&quot; media=&quot;all&quot; onload=&quot;this.media=&#x27;all&#x27;&quot; /&gt; #鸿蒙正常字体 - &lt;link rel=&quot;stylesheet&quot; href=&quot;//s1.hdslb.com/bfs/static/jinkela/long/font/medium.css&quot; media=&quot;all&quot; onload=&quot;this.media=&#x27;all&#x27;&quot; /&gt; #鸿蒙加粗字体 tale/_config.stellar.yml1234style: font-family: body: &#x27;HarmonyOS_Regular&#x27; # 鸿蒙正常字体 #body: &#x27;HarmonyOS_Regular&#x27; # 鸿蒙加粗字体","tags":["Stellar"],"categories":["博客搭建"]},{"title":"Hexo博客搭建全过程（持续更新。。。）","path":"/2023/10/08/blog-init/","content":"初始化博客初始化博客1hexo init tale 修改依赖tale/package.json1234567891011121314151617181920212223242526&#123; &quot;name&quot;: &quot;hexo-site&quot;, &quot;version&quot;: &quot;0.0.0&quot;, &quot;private&quot;: true, &quot;scripts&quot;: &#123; &quot;build&quot;: &quot;hexo generate&quot;, &quot;clean&quot;: &quot;hexo clean&quot;, &quot;deploy&quot;: &quot;hexo deploy&quot;, &quot;server&quot;: &quot;hexo server&quot; &#125;, &quot;hexo&quot;: &#123; &quot;version&quot;: &quot;5.4.2&quot; &#125;, &quot;dependencies&quot;: &#123; &quot;hexo&quot;: &quot;^5.4.0&quot;, &quot;hexo-generator-archive&quot;: &quot;^1.0.0&quot;, &quot;hexo-generator-category&quot;: &quot;^1.0.0&quot;, &quot;hexo-generator-index&quot;: &quot;^2.0.0&quot;, &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;, &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;, &quot;hexo-renderer-marked&quot;: &quot;^4.0.0&quot;, &quot;hexo-renderer-stylus&quot;: &quot;^2.0.0&quot;, &quot;hexo-server&quot;: &quot;^2.0.0&quot;, &quot;hexo-theme-landscape&quot;: &quot;^0.0.3&quot; &#125;&#125; 更新依赖1npm update 推送博客到github-pages修改配置tale/_config.yml12345deploy: - type: git repo: https://github.com/z23654262/z23654262.github.io.git branch: gh-pages message: &quot;Build at &#123;&#123; now(&#x27;YYYY-MM-DD HH:mm:ss Z&#x27;) &#125;&#125;&quot; 安装插件1npm i hexo-deployer-git 推送静态文件到github1hexo clean &amp;&amp; hexo g &amp;&amp; hexo d Stellar主题配置安装Stellar主题1npm i hexo-theme-stellar 修改配置tale/_config.yml1theme: stellar 设置文章模板新建一篇文章1hexo n blog-init 启动博客1hexo s image-20231008153652198 域名解析购买域名阿里云购入：sfzhang.top 备案配置解析","tags":["Stellar","Hexo"],"categories":["博客搭建"]},{"path":"/life/index.html","content":"分享自己的生活碎片！"},{"path":"/customize/css/ZYDark.css","content":"#ZYDark:root { --site-bg: #1c1e21; --card: #373d43; --block: #26292c; --block-border: #383d42; --block-hover: #2f3337; --text-p0: #fff; --text-p1: #ccc; --text-p2: #b3b3b3; --text-p3: #858585; --text-p4: #707070; --text-meta: #4d4d4d; --text-code: #ff6333; } @media screen and (max-width: 667px) { #ZYDark:root { --site-bg: #000; } } #ZYDark:root { --blur-bg: rgba(0,0,0,0.5); } #ZYDark .float-panel { --blur-bg: rgba(0,0,0,0.4); } #ZYDark .tag-plugin.tag { --theme: #ff6333; --theme-bg1: #3d1e14; --theme-bg2: #2f2522; --theme-border: #5c2d1f; --text-p0: #ffc4b3; --text-p1: #dfae9f; --text-p2: #f1997e; } #ZYDark .tag-plugin[color='red'] { --theme: #f44336; --theme-bg1: #3d1714; --theme-bg2: #2f2322; --theme-border: #5c231f; --text-p0: #ffb8b3; --text-p1: #dfa49f; --text-p2: #f1867e; } #ZYDark .tag-plugin[color='orange'] { --theme: #fa6400; --theme-bg1: #3d2514; --theme-bg2: #2f2722; --theme-border: #5c371f; --text-p0: #ffd1b3; --text-p1: #dfb99f; --text-p2: #f1ac7e; } #ZYDark .tag-plugin[color='yellow'] { --theme: #ffbd2b; --theme-bg1: #3d3014; --theme-bg2: #2f2b22; --theme-border: #5c491f; --text-p0: #ffe7b3; --text-p1: #dfcb9f; --text-p2: #f1cd7e; } #ZYDark .tag-plugin[color='green'] { --theme: #3dc550; --theme-bg1: #143d1a; --theme-bg2: #222f24; --theme-border: #1f5c27; --text-p0: #b3ffbd; --text-p1: #9fdfa8; --text-p2: #7ef18e; } #ZYDark .tag-plugin[color='cyan'] { --theme: #1bcdfc; --theme-bg1: #14353d; --theme-bg2: #222d2f; --theme-border: #1f4f5c; --text-p0: #b3efff; --text-p1: #9fd2df; --text-p2: #7ed9f1; } #ZYDark .tag-plugin[color='blue'] { --theme: #2196f3; --theme-bg1: #142b3d; --theme-bg2: #222a2f; --theme-border: #1f415c; --text-p0: #b3ddff; --text-p1: #9fc3df; --text-p2: #7ebef1; } #ZYDark .tag-plugin[color='purple'] { --theme: #9c27b0; --theme-bg1: #37143d; --theme-bg2: #2d222f; --theme-border: #531f5c; --text-p0: #f4b3ff; --text-p1: #d69fdf; --text-p2: #e07ef1; } #ZYDark .tag-plugin[color='light'] { --theme-border: #fff; --theme-bg1: #e0e0e0; --theme-bg2: #fff; --text-p0: #000; --text-p1: #111; --text-p2: #1f1f1f; --text-p3: #555; --text-code: #fff; } #ZYDark .tag-plugin[color='dark'] { --theme-border: #000; --theme-bg1: #1f1f1f; --theme-bg2: #111; --text-p0: #fff; --text-p1: #fff; --text-p2: #e0e0e0; --text-p3: #ddd; --text-code: #fff; } #ZYDark .tag-plugin[color='warning'], #ZYDark .tag-plugin[color='light'] { --text-p0: #000; --text-p1: #111; --text-p2: #1f1f1f; --text-p3: #555; --text-code: #fff; } #ZYDark .social-wrap a.social:hover { box-shadow: none; } /* waline评论样式 */ #ZYDark .wl-count{ padding: .375em; font-weight: bold; font-size: 1.25em; color: #fff; } #ZYDark .cmt-body.waline{ --waline-white: #000; --waline-light-grey: #666; --waline-dark-grey: #999; /* 布局颜色 */ --waline-color: #fff; --waline-bgcolor: var(--block); --waline-bgcolor-light: #272727; --waline-border-color: #333; --waline-disable-bgcolor: #444; --waline-disable-color: #272727; /* 特殊颜色 */ --waline-bq-color: #272727; /* 其他颜色 */ --waline-info-bgcolor: #272727; --waline-info-color: #666; }"},{"path":"/customize/js/ZYUtil.js","content":"/** * 钟意工具类 */ class ZYUtil { /** * 判断是否主页类 */ isIndexs = () => { const urls = window.location.href.split('/'); const indexs = [\"\", \"categories\", \"tags\", \"archives\", \"notes\"] if (indexs.indexOf(urls[3]) !== -1) { return true; } else if (indexs.indexOf(\"wiki\") && (urls[4] === \"tags\" || urls[4] === \"\")) { return true; } else return false; } }"},{"path":"/customize/js/ZYDark.js","content":"/** * 监听系统主题 * @type {MediaQueryList} */ var OSTheme = window.matchMedia('(prefers-color-scheme: dark)'); OSTheme.addListener(e => { if (window.localStorage.getItem('ZYI_Theme_Mode') === 'Moss') { ThemeChange('Moss'); } }) /** * 修改博客主题 * @param theme 亮为light,暗为dark,自动为auto * @constructor */ const ThemeChange = (theme) => { if (theme === 'light' || (theme === 'Moss' && !OSTheme.matches)) { document.querySelector(\"html\").id = \"ZYLight\"; document.querySelector(\"#start > aside > footer > div > a:nth-child(6)\").style.filter = 'grayscale(0%)'; document.querySelector(\"#start > aside > footer > div > a:nth-child(5)\").style.filter = 'grayscale(100%)'; } else { document.querySelector(\"html\").id = \"ZYDark\"; document.querySelector(\"#start > aside > footer > div > a:nth-child(5)\").style.filter = 'grayscale(0%)'; document.querySelector(\"#start > aside > footer > div > a:nth-child(6)\").style.filter = 'grayscale(100%)'; } //if (theme === 'Moss') { document.querySelector(\"#start > aside > footer > div > a:nth-child(7)\").style.filter = 'grayscale(0%)'; } //else { document.querySelector(\"#start > aside > footer > div > a:nth-child(7)\").style.filter = 'grayscale(100%)'; } window.localStorage.setItem('ZYI_Theme_Mode', theme); commentChange(theme); } /** * 修改评论主题 * @param theme */ const commentChange = (theme) => { try { let commentSrc = document.querySelector(\"#comments > section.body.cmt-body.giscus > iframe\").src; if (theme === \"Moss\") { theme = OSTheme.matches? 'dark' : 'light'; } commentSrc = commentSrc.replace(theme === 'dark' ? 'theme=light' : 'theme=dark', theme === 'dark' ? 'theme=dark' : 'theme=light'); commentSrc = commentSrc.replace('theme=preferred_color_scheme', theme === 'dark' ? 'theme=dark' : 'theme=light'); document.querySelector(\"#comments > section.body.cmt-body.giscus > iframe\").src = commentSrc; } catch (e) { } } /** * 初始化博客主题 */ switch (window.localStorage.getItem('ZYI_Theme_Mode')) { case 'light': ThemeChange('light'); break; case 'dark': ThemeChange('dark'); break; default: ThemeChange('Moss'); } /** * 初始化评论主题 */ if (!(new ZYUtil).isIndexs()) { try { let dom = document.querySelector(\"#comments > section.body.cmt-body.giscus\"); let MutationObserver = window.MutationObserver || window.webkitMutationObserver || window.MozMutationObserver let mutationObserver = new MutationObserver(function (mutations) { commentChange(window.localStorage.getItem('ZYI_Theme_Mode')); }) mutationObserver.observe(dom, { childList: true, // 子节点的变动（新增、删除或者更改） }) } catch (e) { } } /** * 切换主题模式 */ document.querySelector(\"#start > aside > footer > div > a:nth-child(5)\").onclick = () => { ThemeChange('dark'); } document.querySelector(\"#start > aside > footer > div > a:nth-child(6)\").onclick = () => { ThemeChange('light'); } //document.querySelector(\"#start > aside > footer > div > a:nth-child(7)\").onclick = () => { // ThemeChange('Moss'); //}"}]